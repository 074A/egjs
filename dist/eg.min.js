/*! egjs - v0.0.2
* Copyright (c) 2015 ; Licensed LGPL v2 */
"use strict";!function(a){a.eg={},a.eg.module=function(b,c,d){d.apply(a,c)}}(window),eg.module("animate",[window.jQuery,window],function(a,b){function c(b){b=b.split(")");var c,e,f,g=a.trim,h=-1,i=b.length-1,j=o?new Float32Array(6):[],k=o?new Float32Array(6):[],l=o?new Float32Array(6):[1,0,0,1,0,0];for(j[0]=j[3]=l[0]=l[3]=1,j[1]=j[2]=j[4]=j[5]=0;++h<i;){switch(c=b[h].split("("),e=g(c[0]),f=c[1],k[0]=k[3]=1,k[1]=k[2]=k[4]=k[5]=0,e){case"translateX":k[4]=parseInt(f,10);break;case"translateY":k[5]=parseInt(f,10);break;case"translate":f=f.split(","),k[4]=parseInt(f[0],10),k[5]=parseInt(f[1]||0,10);break;case"rotate":f=d(f),k[0]=Math.cos(f),k[1]=Math.sin(f),k[2]=-Math.sin(f),k[3]=Math.cos(f);break;case"scaleX":k[0]=+f;break;case"scaleY":k[3]=f;break;case"scale":f=f.split(","),k[0]=f[0],k[3]=f.length>1?f[1]:f[0];break;case"skewX":k[2]=Math.tan(d(f));break;case"skewY":k[1]=Math.tan(d(f));break;case"matrix":f=f.split(","),k[0]=f[0],k[1]=f[1],k[2]=f[2],k[3]=f[3],k[4]=parseInt(f[4],10),k[5]=parseInt(f[5],10)}l[0]=j[0]*k[0]+j[2]*k[1],l[1]=j[1]*k[0]+j[3]*k[1],l[2]=j[0]*k[2]+j[2]*k[3],l[3]=j[1]*k[2]+j[3]*k[3],l[4]=j[0]*k[4]+j[2]*k[5]+j[4],l[5]=j[1]*k[4]+j[3]*k[5]+j[5],j=[l[0],l[1],l[2],l[3],l[4],l[5]]}return l}function d(a){return~a.indexOf("deg")?parseInt(a,10)*(2*Math.PI/360):~a.indexOf("grad")?parseInt(a,10)*(Math.PI/200):parseFloat(a)}function e(a,b){var c=a,d=a.match(/([0-9]*)%/);return d&&d.length>=1?c=b*(parseFloat(d[1])/100)+"px":-1===a.indexOf("px")&&(c=a+"px"),c}function f(a,b,c){for(var d,f="",g=a.split(")"),h=0,i=g.length-1;i>h;h++){var j=g[h];if((d=j.match(/(translate([XYZ]|3d)?|rotate)\(([^)]*)/))&&d.length>1)if("rotate"===d[1])-1===d[3].indexOf("deg")&&(j=d[1]+"("+d[3]+"deg");else switch(d[2]){case"X":j=d[1]+"("+e(d[3],b);break;case"Y":j=d[1]+"("+e(d[3],c);break;case"Z":break;default:for(var k=d[3].split(","),l=[b,c,100],m=0,n=k.length;n>m;m++)k[m]=e(k[m],l[m]);j=d[1]+"("+k.join(",")}j=" "+j+")",f+=j}return f=f.replace("%","").replace("+=","")}function g(a){var b=a.match(/(-*[\d|\.]+)(px|deg|rad)*/);return b&&b.length>=1?{num:parseFloat(b[1]),unit:b[2]}:void 0}function h(b){for(var c=b.split(")"),d=[],e=0,f=c.length-1;f>e;e++){var h=l(c[e]);h[1]=a.map(h[1],g),d.push(h)}return function(b){var c="",e=0;return a.each(d,function(f){"scale"===d[f][0]&&(e=1);var g=a.map(d[f][1],function(a){var c=a.num;return 1===e&&(c-=1),e+c*b+(a.unit||"")}).join(",");c+=d[f][0]+"("+g+") "}),c}}function i(b,c,d){var e,g,i=d.indexOf("+=")>=0;return d=f(d,parseFloat(a.css(b,"width"))||0,parseFloat(a.css(b,"height"))||0),i?(e=c&&"none"!==c?c:"matrix(1, 0, 0, 1, 0, 0)",g=h(d)):(e=m(c),g=m(d),e[1].length<g[1].length?e=n(e):e[1].length>g[1].length&&(g=n(g))),function(a){var b=[],c="";if(i)return c=e+g(a);if(1===a)c=j(g);else{for(var d,f,h=0,k=e[1].length;k>h;h++)d=parseFloat(e[1][h]),f=parseFloat(g[1][h]),b.push(d+(f-d)*a);c=j([e[0],b])}return c}}function j(b){var c,d=[];if(a.isArray(b))return c=b[0],c+"("+b[1].join(k(c)+",")+k(c)+")";for(c in b)d.push(c);return a.map(d,function(a){return a+"("+b[a]+k(a)+")"}).join(" ")}function k(a){return a.indexOf("translate")>=0?"px":a.indexOf("rotate")>=0?"deg":""}function l(b){var c,d,e=b.match(/(\b\w+?)\((\s*[^\)]+)/),f=["",""];return e&&e.length>2&&(c=e[1],d=e[2].split(","),d=a.map(d,function(b){return a.trim(b)}),f=[a.trim(c),d]),f}function m(a){var b=[];return a&&"none"!==a?(b=p?l(new p(a).toString()):["matrix",c(a)],a.indexOf("3d")>=0&&b[0].indexOf("3d")<0&&(b=n(b)),b):["matrix",["1","0","0","1","0","0"]]}function n(a){var b=a[0],c=a[1];return"matrix3d"===b?a:[b+"3d",[c[0],c[1],"0","0",c[2],c[3],"0","0","0","0","1","0",c[4],c[5],"0","1"]]}var o="Float32Array"in window,p=b.WebKitCSSMatrix||b.MSCSSMatrix||b.OCSSMatrix||b.MozMatrix||b.CSSMatrix;return a.fx.step.transform=function(b){b.rateFn=b.rateFn||i(b.elem,b.start,b.end),a.style(b.elem,"transform",b.rateFn(b.pos))},{toMatrix:m,toMatrix3d:n}}),eg.module("css",[window.jQuery,document],function(a,b){if(!a.cssHooks)throw new Error("jQuery 1.4.3+ is needed for this plugin to work");if(!(a.fn&&a.fn.jquery&&a.fn.jquery.replace(/\./,"")>="18")){var c=["Webkit","Moz","O","ms"],d=["transitionProperty","transitionDuration","transition","transform","transitionTimingFunction"],e=function(){for(var a=(b.head||b.getElementsByTagName("head")[0]).style,d=0,e=c.length;e>d;d++)if(c[d]+"Transition"in a)return c[d]}();if(e){for(var f=function(b){var c=b.charAt(0).toUpperCase()+b.slice(1),d=e+c,f="ms"===e?"Ms"+c:d;a.cssHooks[c]=a.cssHooks[e.toLowerCase()+c]=a.cssHooks[b]={get:function(b,c){return c?a.css(b,f):b.style[d]},set:function(a,b){a.style[d]=b}}},g=0,h=d.length;h>g;g++)f(d[g]);return{vendorPrefix:e,setCssHooks:f}}}}),eg.module("eg",[window.jQuery,eg,window],function(a,b,c){function d(a,b,c,d){var e=a.hook[b];return e&&(d=e.apply(a,c)),a[b]=function(){var e=a.hook[b];return e?e.apply(a,c):d},d}function e(a,b){return a.browser.webview="android"===a.os.name&&b.indexOf("; wv")>-1||"ios"===a.os.name&&"-1"===a.browser.version||b.indexOf("NAVER")>-1||b.indexOf("Daum")>-1||!1,a}var f=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.msRequestAnimationFrame,g=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.msCancelAnimationFrame;if(f&&!g){var h={},i=f;f=function(a){function b(){h[c]&&a()}var c=i(b);return h[c]=!0,c},g=function(a){delete h[a]}}else f&&g||(f=function(a){return c.setTimeout(a,16)},g=c.clearTimeout);var j;b.VERSION="0.0.2",b.hook={},b.agent=function(a){j=a||navigator.userAgent;var b=/(Windows Phone) ([\d|\.]+)/.exec(j)||/(iPhone |iPad )?OS ([\d|_]+)/.exec(j)||/(Android) ([\w.]+)/.exec(j)||/(Windows NT) ([\d|\.]+)/.exec(j)||/(Windows) ([\w|\.]+)/.exec(j)||/(Mac OS X)( ([\w.]+))?/.exec(j)||[],c=/(Chrome|CriOS|Firefox)[\s\/]([\w.]+)/.exec(j)||/(MSIE|IEMobile)[\/\s]([\d.]+)/.exec(j)||/(Trident)[\/\s]([\d.]+)/.exec(j)||/(PhantomJS)\/([\d.]+)/.exec(j)||[];b.length>=3&&(-1!==j.indexOf("Win")?(b[1]="window",b[2]="2000"===b[2]?"5.0":b[2]):b[1]=/iPhone|iPad/.test(j)?"ios":-1!==j.indexOf("Mac")?"mac":b[1].toLowerCase(),b[2]=(b[2]||"").replace(/\_/g,".").replace(/\s/g,"")),c.length>=3?c[1]=/MSIE|IEMobile|Trident/.test(j)?"ie":/Chrome|CriOS/.test(j)?-1!==j.indexOf("SAMSUNG")?"sbrowser":"chrome":c[1].toLowerCase():0===c.length&&b[1]&&"android"!==b[1]&&(c=/(Safari)\/([\w.]+)/.exec(j)||("ios"===b[1]?["","safari"]:["",""]),c[1]=c[1].toLowerCase(),c[0]&&-1!==c[1].indexOf("safari")&&(c[2]=-1!==j.indexOf("Apple")?j.match(/Version\/([\d.]+)/)[1]||null:null));var f={os:{name:b[1]||"",version:b[2]||"-1"},browser:{name:c[1]||"default",version:c[2]||"-1"}};return f=e(f,j),d(this,"agent",[f],f)},b.translate=function(a,b,c){return c=c||!1,"translate"+(c?"3d(":"(")+a+","+b+(c?",0)":")")},b.isHWAccelerable=function(){var a,b=!1,c=this.agent(),e=c.os.version,f=c.browser.name,g=c.browser.version;return-1!==f.indexOf("chrome")?b=g>="25":/ie|firefox|safari|inapp/.test(f)?b=!0:-1!==c.os.name.indexOf("android")&&(a=(j.match(/\(.*\)/)||[null])[0],b=e>="4.1.0"&&!/EK-GN120|SM-G386F/.test(a)||e>="4.0.3"&&/SHW-|SHV-|GT-|SCH-|SGH-|SPH-|LG-F160|LG-F100|LG-F180|LG-F200|EK-|IM-A|LG-F240|LG-F260/.test(a)&&!/SHW-M420|SHW-M200|GT-S7562/.test(a)),d(this,"isHWAccelerable",[b,c],b)},b.isTransitional=function(){var a=!1,b=this.agent(),c=b.browser.name;if(/chrome|firefox/.test(c))a=!0;else switch(b.os.name){case"ios":a=/safari|inapp/.test(c)&&parseInt(b.os.version,10)<6;break;case"window":a=-1!==c.indexOf("safari")||-1!==c.indexOf("ie")&&parseInt(b.browser.nativeVersion,10)>=10;break;default:a=/chrome|firefox|safari/.test(c)}return d(this,"isTransitional",[a,b],a)},b._hasClickBug=function(){var a=this.agent(),b="ios"===a.os.name;return d(this,"_hasClickBug",[b,a],b)},b.requestAnimationFrame=function(a){return f(a)},b.cancelAnimationFrame=function(a){g(a)},b.DIRECTION_NONE=1,b.DIRECTION_LEFT=2,b.DIRECTION_RIGHT=4,b.DIRECTION_UP=8,b.DIRECTION_DOWN=16,b.DIRECTION_HORIZONTAL=b.DIRECTION_LEFT|b.DIRECTION_RIGHT,b.DIRECTION_VERTICAL=b.DIRECTION_UP|b.DIRECTION_DOWN,b.DIRECTION_ALL=b.DIRECTION_HORIZONTAL|b.DIRECTION_VERTICAL,a.extend(a.easing,{easeOutCubic:function(a){return 1-Math.pow(1-a,3)}})}),eg.module("rotate",[window.jQuery,eg,window,document],function(a,b,c,d){function e(){var a,b,e,f=m();return"resize"===f?(a=d.documentElement.clientWidth,e=-1===h?a<d.documentElement.clientHeight:h>a?!0:a===h?i:!1,h=a):(b=c.orientation,0===b||180===b?e=!0:(90===b||-90===b)&&(e=!1)),e}function f(){var b=e();l&&i!==b&&(i=b,a(c).trigger("rotate"))}function g(a){var b,e,i=m();if("resize"===i)c.setTimeout(function(){f()},0);else{if(b=300,"android"===k.os.name){if(e=d.documentElement.clientWidth,"orientationchange"===a.type&&e===h)return c.setTimeout(function(){g(a)},500),!1;h=e}c.clearTimeout(j),j=c.setTimeout(function(){f()},b)}}var h=-1,i=null,j=null,k=b.agent(),l=/android|ios/.test(k.os.name),m=function(){var a;return a="android"===k.os.name&&"2.1"===k.os.version?"resize":"onorientationchange"in c?"orientationchange":"resize",m=function(){return a},a};return a.event.special.rotate={setup:function(){h=d.documentElement.clientWidth,a(c).on(m(),g)},teardown:function(){a(c).off(m(),g)},trigger:function(a){a.isVertical=i}},{orientationChange:m,isVertical:e,triggerRotate:f,handler:g}}),eg.module("scrollEnd",[jQuery,eg,window,document],function(a,b,c){function d(){var a=n,c=b.agent(),d=c.os,e=d.version,f=c.browser;return"ios"===d.name&&(f.webview===!0||-1!==e.indexOf("7."))&&(a=p),a}function e(){a(c).on("scroll",g),a(c).on("orientationchange",f)}function f(){l=!0}function g(){if(l)return void(l=!1);switch(q){case p:h();break;case n:i()}}function h(){a(c).trigger("scrollend",{top:c.pageYOffset,left:c.pageXOffset})}function i(){clearTimeout(k),k=setTimeout(function(){return l?void(l=!1):void h()},a.event.special.scrollend.latency)}function j(){a(c).off("scroll",g),a(c).off("orientationchange",f)}var k,l=!1,m=3,n=2,o=1,p=0,q=d();return a.event.special.scrollend={latency:250,setup:function(){e()},teardown:function(){j()}},{getDeviceType:d,CHROME:m,TIMERBASE:n,TOUCHBASE:o,SCROLLBASE:p}}),eg.module("class",[eg],function(a){a.Class=function(a){var b=function(){"function"==typeof a.construct&&a.construct.apply(this,arguments)};return b.prototype=a,b.prototype.constructor=b,b},a.Class.extend=function(a,b){var c=function(){a.apply(this,arguments),"function"==typeof b.construct&&b.construct.apply(this,arguments)},d=function(){};d.prototype=a.prototype;var e=new d;for(var f in b)e[f]=b[f];return e.constructor=c,c.prototype=e,c}}),eg.module("component",[eg],function(a){a.Component=a.Class({construct:function(){this.eventHandler={}},trigger:function(a,b){b=b||{};var c=this.eventHandler[a]||[],d=c.length>0;if(!d)return!0;c=c.concat(),b.eventType=a;var e,f,g,h=!1,i=[b];for(b.stop=function(){h=!0},(f=arguments.length)>2&&(i=i.concat(Array.prototype.slice.call(arguments,2,f))),e=0;g=c[e];e++)g.apply(this,i);return!h},hasOn:function(a){return!!this.eventHandler[a]},on:function(a,b){if("object"==typeof a&&"undefined"==typeof b){var c,d=a;for(c in d)this.on(c,d[c]);return this}if("string"==typeof a&&"function"==typeof b){var e=this.eventHandler[a];"undefined"==typeof e&&(e=this.eventHandler[a]=[]),e.push(b)}return this},off:function(a,b){if(0===arguments.length)return this.eventHandler={},this;if("undefined"==typeof b){if("string"==typeof a)return this.eventHandler[a]=void 0,this;var c=a;for(var d in c)this.off(d,c[d]);return this}var e=this.eventHandler[a];if(e){var f,g;for(f=0,g;g=e[f];f++)if(g===b){e=e.splice(f,1);break}}return this}})}),eg.module("movableCoord",[window.jQuery,eg,window.Hammer],function(a,b,c){var d="ontouchstart"in window;b.MovableCoord=b.Class.extend(b.Component,{construct:function(b){this.options={min:[0,0],max:[100,100],bounce:[10,10,10,10],margin:[0,0,0,0],circular:[!1,!1,!1,!1],easing:a.easing.easeOutCubic,maximumDuration:1/0,deceleration:6e-4},this._reviseOptions(b),this._status={grabOutside:!1,curHammer:null,moveDistance:null,animationParam:null,prevented:!1},this._hammers={},this._pos=[this.options.min[0],this.options.min[1]],this._subOptions={},this._raf=null,this._animationEnd=a.proxy(this._animationEnd,this),this._panmove=a.proxy(this._panmove,this),this._panend=a.proxy(this._panend,this)},bind:function(c,d){var e=a(c),f=e.data(b.MovableCoord.KEY),g={direction:b.DIRECTION_ALL,scale:[1,1],thresholdAngle:45,interruptable:!0,inputType:["touch","mouse"]};a.extend(g,d);var h=this._convertInputType(g.inputType);return h?(f?this._hammers[f].get("pan").set({direction:g.direction}):(f=Math.round(Math.random()*(new Date).getTime()),this._hammers[f]=this._createHammer(e.get(0),g,h),e.data(b.MovableCoord.KEY,f)),this):this},_createHammer:function(b,d,e){try{var f=new c.Manager(b,{recognizers:[[c.Pan,{direction:d.direction,threshold:0}]],cssProps:{},inputClass:e});return f.on("hammer.input",a.proxy(function(a){a.isFirst&&(this._subOptions=d,this._status.curHammer=f,this._panstart(a))},this)).on("panstart panmove",this._panmove).on("panend",this._panend)}catch(g){}},_convertInputType:function(b){var e=!1,f=!1;return b=b||[],a.each(b,function(a,b){switch(b){case"mouse":f=!0;break;case"touch":e=d}}),f?e?c.TouchMouseInput:c.MouseInput:e?c.TouchInput:null},unbind:function(c){var d=a(c),e=d.data(b.MovableCoord.KEY);e&&(this._hammers[e].destroy(),delete this._hammers[e],d.data(b.MovableCoord.KEY,null))},_grab:function(){this._status.animationParam&&(this._pos=this._getCircularPos(this._pos),this._triggerChange(this._pos,!0),this._status.animationParam=null,this._raf&&b.cancelAnimationFrame(this._raf),this._raf=null)},_getCircularPos:function(a,b,c,d){return b=b||this.options.min,c=c||this.options.max,d=d||this.options.circular,d[0]&&a[1]<b[1]&&(a[1]=(a[1]-b[1])%(c[1]-b[1]+1)+c[1]),d[1]&&a[0]>c[0]&&(a[0]=(a[0]-b[0])%(c[0]-b[0]+1)+b[0]),d[2]&&a[1]>c[1]&&(a[1]=(a[1]-b[1])%(c[1]-b[1]+1)+b[1]),d[3]&&a[0]<b[0]&&(a[0]=(a[0]-b[0])%(c[0]-b[0]+1)+c[0]),a[0]=+a[0].toFixed(5),a[1]=+a[1].toFixed(5),a},_isOutside:function(a,b,c){return a[0]<b[0]||a[1]<b[1]||a[0]>c[0]||a[1]>c[1]},_isOutToOut:function(a,b,c,d){return(a[0]<c[0]||a[0]>d[0]||a[1]<c[1]||a[1]>d[1])&&(b[0]<c[0]||b[0]>d[0]||b[1]<c[1]||b[1]>d[1])},_panstart:function(a){if(this._subOptions.interruptable||!this._status.prevented){this._setInterrupt(!0);var b=this._pos;this._grab(),this.trigger("hold",{pos:b.concat(),hammerEvent:a}),this._status.moveDistance=b.concat(),this._status.grabOutside=this._isOutside(b,this.options.min,this.options.max)}},_panmove:function(a){if(this._isInterrupting()&&this._status.moveDistance){var c,d,e,f=this._pos,g=this.options.min,h=this.options.max,i=this.options.bounce,j=this.options.margin,k=this._subOptions.direction,l=this._subOptions.scale,m=this._getDirection(a.angle),n=[j[0]+i[0],j[1]+i[1],j[2]+i[2],j[3]+i[3]],o=!1,p=this._status.curHammer.session.prevInput;if(p?(a.offsetX=a.deltaX-p.deltaX,a.offsetY=a.deltaY-p.deltaY):a.offsetX=a.offsetY=0,(k===b.DIRECTION_ALL||k&b.DIRECTION_HORIZONTAL&&m&b.DIRECTION_HORIZONTAL)&&(this._status.moveDistance[0]+=a.offsetX*l[0],o=!0),(k===b.DIRECTION_ALL||k&b.DIRECTION_VERTICAL&&m&b.DIRECTION_VERTICAL)&&(this._status.moveDistance[1]+=a.offsetY*l[1],o=!0),o&&(a.srcEvent.preventDefault(),a.srcEvent.stopPropagation()),a.preventSystemEvent=o,f[0]=this._status.moveDistance[0],f[1]=this._status.moveDistance[1],f=this._getCircularPos(f,g,h),this._status.grabOutside&&!this._isOutside(f,g,h)&&(this._status.grabOutside=!1),this._status.grabOutside)d=g[0]-n[3],e=h[0]+n[1],c=f[0],f[0]=c>e?e:d>c?d:c,d=g[1]-n[0],e=h[1]+n[2],c=f[1],f[1]=c>e?e:d>c?d:c;else{var q=this._initSlope();f[1]<g[1]?(c=(g[1]-f[1])/(n[0]*q),f[1]=g[1]-this._easing(c)*n[0]):f[1]>h[1]&&(c=(f[1]-h[1])/(n[2]*q),f[1]=h[1]+this._easing(c)*n[2]),f[0]<g[0]?(c=(g[0]-f[0])/(n[3]*q),f[0]=g[0]-this._easing(c)*n[3]):f[0]>h[0]&&(c=(f[0]-h[0])/(n[1]*q),f[0]=h[0]+this._easing(c)*n[1])}this._triggerChange(f,!0,a)}},_panend:function(a){if(this._isInterrupting()&&this._status.moveDistance){var c=this._subOptions.direction,d=this._subOptions.scale,e=Math.abs(a.velocityX),f=Math.abs(a.velocityY);!(c&b.DIRECTION_HORIZONTAL)&&(e=0),!(c&b.DIRECTION_VERTICAL)&&(f=0),this._animateBy(this._getNextOffsetPos([e*(a.deltaX<0?-1:1)*d[0],f*(a.deltaY<0?-1:1)*d[1]]),this._animationEnd,!1,null,a),this._status.moveDistance=null}},_isInterrupting:function(){return this._subOptions.interruptable||this._status.prevented},_getDirection:function(a){var c=this._subOptions.thresholdAngle;return 0>c||c>90?b.DIRECTION_NONE:(a=Math.abs(a),a>c&&180-c>a?b.DIRECTION_VERTICAL:b.DIRECTION_HORIZONTAL)},_animationEnd:function(){var b=this._pos,c=this.options.min,d=this.options.max;this._animateTo([Math.min(d[0],Math.max(c[0],b[0])),Math.min(d[1],Math.max(c[1],b[1]))],a.proxy(this.trigger,this,"animationEnd"),!0,null)},_getNextOffsetPos:function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]),c=Math.abs(b/-this.options.deceleration);return[a[0]/2*c,a[1]/2*c]},_getDurationFromPos:function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]),c=Math.sqrt(b/this.options.deceleration*2);return 100>c?0:c},_animateBy:function(a,b,c,d,e){var f=this._pos;return this._animateTo([f[0]+a[0],f[1]+a[1]],b,c,d,e)},_getPointOfIntersection:function(a,b){var c,d,e=this.options.circular,f=this.options.bounce,g=this.options.min,h=this.options.max,i=[g[0]-f[3],g[1]-f[0]],j=[h[0]+f[1],h[1]+f[2]];return b=[b[0],b[1]],c=b[0]-a[0],d=b[1]-a[1],e[3]||(b[0]=Math.max(i[0],b[0])),e[1]||(b[0]=Math.min(j[0],b[0])),b[1]=c?a[1]+d/c*(b[0]-a[0]):b[1],e[0]||(b[1]=Math.max(i[1],b[1])),e[2]||(b[1]=Math.min(j[1],b[1])),b[0]=d?a[0]+c/d*(b[1]-a[1]):b[0],b},_isCircular:function(a,b,c,d){return a[0]&&b[1]<c[1]||a[1]&&b[0]>d[0]||a[2]&&b[1]>d[1]||a[3]&&b[0]<c[0]},_animateTo:function(a,b,c,d,e){var f=this._pos,g=this._getPointOfIntersection(f,a),h={depaPos:f.concat(),destPos:g,hammerEvent:e||{}};!c&&e&&this.trigger("release",h),this._afterReleaseProcess(h,b,c,d)},_afterReleaseProcess:function(c,d,e,f){var g,h=this._pos,i=this.options.min,j=this.options.max,k=this.options.circular,l=this._isCircular(k,c.destPos,i,j),m=this._isOutToOut(h,c.destPos,i,j)?h:c.destPos,n=[Math.abs(m[0]-h[0]),Math.abs(m[1]-h[1])];f=null===f?this._getDurationFromPos(n):f,f=this.options.maximumDuration>f?f:this.options.maximumDuration;var o=a.proxy(function(a){this._status.animationParam=null,h[0]=Math.round(m[0]),h[1]=Math.round(m[1]),h=this._getCircularPos(h,i,j,k),!a&&this._setInterrupt(!1),d()},this);if(0===n[0]&&0===n[1])return o(!e);g={duration:f,depaPos:h.concat(),destPos:m,isBounce:e,isCircular:l,done:o};var p=this.trigger("animationStart",g);if(l&&!p)throw new Error("You can't stop the 'animation' event when 'circular' is true.");if(g.depaPos=h,g.startTime=(new Date).getTime(),this._status.animationParam=g,p)if(g.duration){var q=this._status.animationParam,r=this;!function s(){return r._raf=null,r._frame(q)>=1?o(!0):void(r._raf=b.requestAnimationFrame(s))}()}else this._triggerChange(g.destPos,!1),o(!e)},_frame:function(a){for(var b=new Date-a.startTime,c=this._easing(b/a.duration),d=[a.depaPos[0],a.depaPos[1]],e=0;2>e;e++)d[e]!==a.destPos[e]&&(d[e]+=(a.destPos[e]-d[e])*c);return d=this._getCircularPos(d),this._triggerChange(d,!1),c},_reviseOptions:function(b){var c;a.each(["bounce","margin","circular"],function(d,e){c=b[e],null!=c&&(b[e]=a.isArray(c)?2===c.length?[c[0],c[1],c[0],c[1]]:[c[0],c[1],c[2],c[3]]:/string|number|boolean/.test(typeof c)?[c,c,c,c]:null)}),a.extend(this.options,b)},_triggerChange:function(a,b,c){this._pos=a.concat(),this.trigger("change",{pos:a.concat(),holding:b,hammerEvent:c||{}})},get:function(){return this._pos.concat()},setTo:function(a,b,c){this._grab();var d=this._pos.concat(),e=this.options.circular,f=this.options.min,g=this.options.max;return a===d[0]&&b===d[1]?this:(this._setInterrupt(!0),a!==d[0]&&(e[3]||(a=Math.max(f[0],a)),e[1]||(a=Math.min(g[0],a))),b!==d[1]&&(e[0]||(b=Math.max(f[1],b)),e[2]||(b=Math.min(g[1],b))),c?this._animateTo([a,b],this._animationEnd,!1,c):(this._pos=this._getCircularPos([a,b]),this._triggerChange(this._pos,!1),this._setInterrupt(!1)),this)},setBy:function(a,b,c){return this.setTo(null!=a?this._pos[0]+a:this._pos[0],null!=b?this._pos[1]+b:this._pos[1],c)},_easing:function(a){return a>1?1:this.options.easing(a,a,0,1,1)},_initSlope:function(){var b,c=this.options.easing,d=!1;for(b in a.easing)if(a.easing[b]===c){d=!~b.indexOf("Out");break}return d?c(.9999,.9999,0,1,1)/.9999:c(1e-5,1e-5,0,1,1)/1e-5},_setInterrupt:function(a){!this._subOptions.interruptable&&(this._status.prevented=a)},destroy:function(){this.off();for(var a in this._hammers)this._hammers[a].destroy(),this._hammers[a]=null}}),b.MovableCoord.KEY="__MOVABLECOORD__"}),eg.module("flicking",[window.jQuery,eg,eg.MovableCoord],function(a,b,c){b.Flicking=b.Class.extend(b.Component,{construct:function(c,d){this.$wrapper=a(c),a.extend(this.options={hwAccelerable:b.isHWAccelerable(),prefix:"eg-flick",deceleration:6e-4,horizontal:!0,circular:!1,previewPadding:[0,0],threshold:40,duration:100,panelEffect:a.easing.easeOutCubic,defaultIndex:0,inputType:["touch","mouse"]},d);var e=this.options.previewPadding,f=window.CSS&&window.CSS.supports&&window.CSS.supports("will-change","transform"),g=b.agent().os;"number"==typeof e?e=this.options.previewPadding=[e,e]:e.constructor!==Array&&(e=this.options.previewPadding=[0,0]),this._conf={panel:{$list:[],index:0,no:0,size:0,count:0,origCount:0,changed:!1,animating:!1,minCount:e[0]+e[1]>0?5:3},touch:{holdPos:[0,0],destPos:[0,0],distance:0,direction:null},customEvent:{},useLayerHack:this.options.hwAccelerable&&!f,dirData:[],indexToMove:0,triggerFlickEvent:!0,isAndroid2:"android"===g.name&&/^2\./.test(g.version),$dummyAnchor:null},a([["LEFT","RIGHT"],["DOWN","UP"]][+!this.options.horizontal]).each(a.proxy(function(a,c){this._conf.dirData.push(b["DIRECTION_"+c])},this)),!b._hasClickBug()&&(this._setPointerEvents=function(){}),this._build(),this._bindEvents(),this._applyPanelsCss(),this._arrangePanels(),this.options.hwAccelerable&&f&&this._setHint(),this._adjustContainerCss("end")},_build:function(){var a,d=this._conf.panel,e=this.options,f=d.$list=this.$wrapper.children(),g=e.previewPadding.concat(),h=e.prefix,i=e.horizontal,j=d.count=d.origCount=f.length,k=[d.size=this.$wrapper[i?"width":"height"]()-(g[0]+g[1]),"100%"];this.$wrapper.css({padding:(i?"0 "+g.reverse().join("px 0 "):g.join("px 0 "))+"px",overflow:"hidden"}),this._getDataByDirection(k),f.addClass(h+"-panel").css({position:"absolute",width:k[0],height:k[1],top:0,left:0}),a="position:relative;z-index:2000;width:100%;height:100%;"+(i?"":"top:"+g[0]+"px;"),this.$container=f.wrapAll("<div class='"+h+"-container' style='"+a+"' />").parent(),this._addClonePanels()&&(j=d.count=(d.$list=this.$container.children()).length),this._mcInst=new c({min:[0,0],max:this._getDataByDirection([d.size*(j-1),0]),margin:0,circular:!1,easing:e.panelEffect,deceleration:e.deceleration}).bind(this.$wrapper,{scale:this._getDataByDirection([-1,0]),direction:b["DIRECTION_"+(i?"HORIZONTAL":"VERTICAL")],interruptable:!1,inputType:e.inputType}),this._setDefaultPanel(e.defaultIndex)},_addClonePanels:function(){var a,b=this._conf.panel,c=b.origCount,d=b.minCount-c,e=b.$list;if(this.options.circular&&c<b.minCount){for(a=e.clone();a.length<d;)a=a.add(e.clone());return this.$container.append(a)}},_movePanelPosition:function(b,c){var d,e=this._conf.panel,f=e.$list.toArray();d=f.splice(c?0:e.count-b,b),e.$list=a(c?f.concat(d):d.concat(f))},_setDefaultPanel:function(a){var b,c=this._conf.panel,d=c.count-1;this.options.circular?(a>0&&d>=a&&this._movePanelPosition(a,!0),this._movePanelPosition(this._getBasePositionIndex(),!1),c.no=a):a>0&&d>=a&&(c.index=a,b=[-(c.size*a),0],this._setTranslate(b),this._setMovableCoord("setTo",[Math.abs(b[0]),Math.abs(b[1])],!0,0))},_arrangePanels:function(a,b){var c=this._conf,d=c.panel,e=c.touch,f=c.dirData;this.options.circular&&(c.triggerFlickEvent=!1,a&&(b&&(e.direction=f[+!Boolean(b>0)]),this._arrangePanelPosition(e.direction,b)),d.index=this._getBasePositionIndex(),c.triggerFlickEvent=!!this._setMovableCoord("setTo",[d.size*d.index,0],!0,0)),this._applyPanelsPos()},_applyPanelsPos:function(){this._conf.panel.$list.each(a.proxy(this._applyPanelsCss,this))},_applyPanelsCss:function(){var c=this._conf,d="__dummy_anchor";c.isAndroid2?(c.$dummyAnchor=a("."+d),!c.$dummyAnchor.length&&this.$wrapper.append(c.$dummyAnchor=a("<a href='javascript:void(0);' class='"+d+"' style='position:absolute;height:0px;width:0px;'>")),this._applyPanelsCss=function(b,c){var d=this._getDataByDirection([this._conf.panel.size*b+"px",0]);a(c).css({left:d[0],top:d[1]})}):this._applyPanelsCss=function(c,d){var e=this._getDataByDirection([100*c+"%",0]);a(d).css("transform",b.translate(e[0],e[1],this._conf.useLayerHack))}},_adjustContainerCss:function(a,c){var d,e=this._conf,f=e.panel,g=this.options,h=g.horizontal,i=g.previewPadding[0],j=this.$container;e.isAndroid2&&("start"===a?(j=j[0].style,d=parseInt(j[h?"left":"top"],10),h?d&&(j.left=0):d!==i&&(j.top=i+"px"),this._setTranslate([-c[+!g.horizontal],0])):"end"===a&&(c||(c=[-f.size*f.index,0]),!h&&(c[0]+=i),c=this._getCoordsValue(c),j.css({left:c.x,top:c.y,transform:b.translate(0,0,e.useLayerHack)}),e.$dummyAnchor[0].focus()))},_setMovableCoord:function(a,b,c,d){return c&&this._getDataByDirection(b),this._mcInst[a](b[0],b[1],d)},_setHint:function(){var a="transform";this.$container.css("willChange",a),this._conf.panel.$list.css("willChange",a)},_getDataByDirection:function(a){return!this.options.horizontal&&a.reverse(),a},_arrangePanelPosition:function(a,b){var c=a===this._conf.dirData[0];this._movePanelPosition(Math.abs(b||1),c)},_getBasePositionIndex:function(){var a=this._conf.panel;return a.index=Math.floor(a.count/2-.1)},_bindEvents:function(){this._mcInst.on({hold:a.proxy(this._holdHandler,this),change:a.proxy(this._changeHandler,this),release:a.proxy(this._releaseHandler,this),animationStart:a.proxy(this._animationStartHandler,this),animationEnd:a.proxy(this._animationEndHandler,this)})},_holdHandler:function(a){this._conf.touch.holdPos=a.pos,this._conf.panel.changed=!1,this._adjustContainerCss("start",a.pos)},_changeHandler:function(a){var b=a.pos,c=null;this._setPointerEvents(a),this._conf.triggerFlickEvent&&!a.holding&&(c=this._triggerEvent("flick",{pos:a.pos})),(c||null===c)&&this._setTranslate([-b[+!this.options.horizontal],0])},_releaseHandler:function(a){var b=this._conf.touch,c=a.destPos,d=+!this.options.horizontal,e=b.holdPos[d],f=this._conf.panel.size;b.distance=a.depaPos[d]-b.holdPos[d],b.direction=this._conf.dirData[+!Boolean(b.holdPos[d]<a.depaPos[d])],c[d]=Math.max(e-f,Math.min(e,c[d])),b.destPos[d]=c[d]=Math.round(c[d]/f)*f,0===b.distance&&this._adjustContainerCss("end"),this._setPointerEvents()},_animationStartHandler:function(a){var b=this._conf,c=b.panel,d={depaPos:a.depaPos,destPos:a.destPos},e=function(){a.stop(),c.animating=!1};c.animating=!0,this._setPhaseValue("start"),a.destPos[+!this.options.horizontal]=c.size*(c.index+this._conf.indexToMove),this._isMovable()?this._triggerEvent("beforeFlickStart",d)||(e(),c.changed=!1):(b.customEvent.restore=this._triggerEvent("beforeRestore",d),b.customEvent.restore||e())},_animationEndHandler:function(){var a=this._conf.panel;this._setPhaseValue("end"),a.animating=!1,a.changed?this._triggerEvent("flickEnd"):this._conf.customEvent.restore&&this._triggerEvent("restore")},_setPhaseValue:function(a){var b,c=this._conf,d=this.options,e=c.panel;~a.indexOf("start")&&(e.changed=this._isMovable())&&0===c.indexToMove&&this._setPanelNo(),~a.indexOf("end")&&(d.circular&&e.changed&&this._arrangePanels(!0,c.indexToMove),b=[-e.size*e.index,0],c.isAndroid2?this._adjustContainerCss("end",b):this._setTranslate(b),c.indexToMove=0)},_setPanelNo:function(a){var b=this._conf.panel,c=b.origCount-1,d=this._conf.touch.direction===this._conf.dirData[0]?1:-1;a?(b.index-=d,b.no-=d):(b.index+=d,b.no+=d),b.no>c?b.no=0:b.no<0&&(b.no=c)},_setPointerEvents:function(a){var b,c=this.$container.css("pointerEvents");a&&a.holding&&a.hammerEvent.preventSystemEvent&&"none"!==c?b="none":a||"auto"===c||(b="auto"),b&&this.$container.css("pointerEvents",b)},_getCoordsValue:function(a){return this._getDataByDirection(a),{x:this._getUnitValue(a[0]),y:this._getUnitValue(a[1])}},_setTranslate:function(a){a=this._getCoordsValue(a),this.$container.css("transform",b.translate(a.x,a.y,this._conf.useLayerHack))},_getUnitValue:function(a){var b=/(?:[a-z]{2,}|%)$/;return(parseInt(a,10)||0)+(String(a).match(b)||"px")},_isMovable:function(){return Math.abs(this._conf.touch.distance)>=this.options.threshold},_triggerEvent:function(b,c){var d=this._conf.panel;return this.trigger(b,c=a.extend({eventType:b,index:d.index,no:d.no,direction:this._conf.touch.direction},c))},_getElement:function(b,c,d){var e,f,g,h=this._conf.panel,i=this.options.circular,j=h.index,k=b===this._conf.dirData[0],l=null;return d?(e=h.count,f=j):(e=h.origCount,f=h.no),g=f,k?e-1>f?f++:i&&(f=0):f>0?f--:i&&(f=e-1),g!==f&&(l=c?a(h.$list[k?j+1:j-1]):f),l},_setValueToMove:function(a){this._conf.touch.distance=this.options.threshold+1,this._conf.touch.direction=this._conf.dirData[+!a]},_getNumValue:function(a,b){return isNaN(a=parseInt(a,10))?b:a},_movePanel:function(a,b){var c=this._conf.panel,d=this.options;c.animating||(b=this._getNumValue(b,d.duration),this._setValueToMove(a),(d.circular||null!=this[a?"getNextIndex":"getPrevIndex"]())&&(this._setMovableCoord("setBy",[c.size*(a?1:-1),0],!0,b),!b&&this._setPhaseValue("startend")))},getIndex:function(a){return this._conf.panel[a?"index":"no"]},getElement:function(){var b=this._conf.panel;return a(b.$list[b.index])},getNextElement:function(){return this._getElement(this._conf.dirData[0],!0)},getNextIndex:function(a){return this._getElement(this._conf.dirData[0],!1,a)},getAllElements:function(){return this._conf.panel.$list},getPrevElement:function(){return this._getElement(this._conf.dirData[1],!0)},getPrevIndex:function(a){return this._getElement(this._conf.dirData[1],!1,a)},getTotalCount:function(a){return this._conf.panel[a?"count":"origCount"]},isPlaying:function(){return this._conf.panel.animating},next:function(a){this._movePanel(!0,a)},prev:function(a){this._movePanel(!1,a)},moveTo:function(a,b){var c,d,e=this._conf.panel,f=this.options,g=e.index,h=0;a=this._getNumValue(a),"number"!=typeof a||a>=e.origCount||a===e.no||e.animating||(b=this._getNumValue(b,f.duration),d=f.circular||a>=0&&a<e.origCount,f.circular?(c=[g,e.count-(g+1)],a>e.no?(h=a-e.no,h>c[1]&&(h=-(c[0]+1-(h-c[1])))):(h=-(e.no-a),Math.abs(h)>c[0]&&(h=c[1]+1-(Math.abs(h)-c[0]))),e.no=a,this._conf.indexToMove=h,this._setValueToMove(h>0),this._setMovableCoord("setBy",[e.size*h,0],!0,b)):d&&(e.no=e.index=a,this._setMovableCoord("setTo",[e.size*a,0],!0,b)),d&&!b&&this._setPhaseValue("startend"))},resize:function(){var a=this._conf,b=a.panel,c=b.size=this.$wrapper.width(),d=[c*(b.count-1),0];this.$container.width(d[0]+c),b.$list.css("width",c),this._mcInst.options.max=d,this._setMovableCoord("setTo",[c*b.index,0],!0,0),a.isAndroid2&&(this._applyPanelsPos(),this._adjustContainerCss("end"))},restore:function(){var a=this._conf,b=a.panel,c=this._getDataByDirection(this._mcInst.get())[0];c%b.size&&(this._setPanelNo(!0),this._setMovableCoord("setTo",[b.size*b.index,0],!0,0),a.isAndroid2&&this._adjustContainerCss("end"))}})}),eg.module("infiniteGrid",[window.jQuery,eg,window,window.Outlayer,window.global],function(a,b,c,d){function e(a,b){a[j](i+"load",b,!0),a[j](i+"error",b,!0)}function f(a,b){a[k](i+"load",b,!0),a[k](i+"error",b,!0)}function g(b,c,d){var e;return a.each(d,function(d,f){e=c[f],null!=e&&(b[f]=a.isArray(e)?a.merge([],e):a.isPlainObject(e)?a.extend(!0,{},e):e)}),b}if(!d)return void(b.InfiniteGrid=b.Class({}));var h=!!c.addEventListener,i=h?"":"on",j=h?"addEventListener":"attachEvent",k=h?"removeEventListener":"detachEvent",l=d.create("InfiniteGrid");a.extend(l.prototype,{_resetLayout:function(){this._isLayoutInited||this._registGroupKey(this.options.defaultGroupKey,this.items),this.element.style.width=null,this.getSize(),this._measureColumns()},_getContainerSize:function(){return{height:Math.max.apply(Math,this._appendCols),
width:this.size.outerWidth}},_getItemLayoutPosition:function(b){this._equalItemSize?b.size=this._equalItemSize:b.getSize(),null==b.isAppend&&(b.isAppend=!0);var c,d,e=b.isAppend,f=e?this._appendCols:this._prependCols;return c=Math[e?"min":"max"].apply(Math,f),d=a.inArray(c,f),f[d]=c+(e?b.size.outerHeight:-b.size.outerHeight),{x:this.columnWidth*d,y:e?c:c-b.size.outerHeight}},resetLayout:function(){this._resetLayout(),this._isLayoutInited=!0},updateCols:function(a){for(var b,c=a?this._appendCols:this._prependCols,d=this.getColItems(a),e=this._isFitted||a?0:this._getMinY(d),f=0,g=c.length;g>f;f++)c[f]=(b=d[f])?b.position.y+(a?b.size.outerHeight:-e):0;return e},_getMinY:function(b){return Math.min.apply(Math,a.map(b,function(a){return a?a.position.y:0}))},_measureColumns:function(){var a=this.size.outerWidth,b=this._getColumnWidth(),c=a/b,d=b-a%b;for(c=Math.max(Math[d&&1>d?"round":"floor"](c),1),this._appendCols=[],this._prependCols=[];c--;)this._appendCols.push(0),this._prependCols.push(0)},_getColumnWidth:function(){var a,b=this.items[0]&&this.items[0].element;return a=b?getSize(b):{outerWidth:0,outerHeight:0},this.options.isEqualSize&&(this._equalItemSize=a),this.columnWidth=a.outerWidth||this.size.outerWidth,this.columnWidth},_getColIdx:function(a){return parseInt(a.position.x/parseInt(this.columnWidth,10),10)},getColItems:function(a){for(var b,c,d=this._appendCols.length,e=new Array(d),f=0,g=a?this.items.length-1:0;b=this.items[g];){if(c=this._getColIdx(b),!e[c]&&(e[c]=b,++f===d))return e;g+=a?-1:1}return e},clone:function(b,c){return g(b,c,["_equalItemSize","_appendCols","_prependCols","columnWidth","size","options"]),b.items=b.items||[],b.items.length=c.items.length,a.each(c.items,function(a){b.items[a]=g(b.items[a]||{},c.items[a],["position","size","isAppend","groupKey"])}),b},itemize:function(a,b){var c=this._itemize(a);return this._registGroupKey(b,c),c},_registGroupKey:function(a,b){if(null!=a)for(var c,d=0;c=b[d++];)c.groupKey=a},destroy:function(){this.off(),d.prototype.destroy.apply(this)}}),b.InfiniteGrid=b.Class.extend(b.Component,{construct:function(b,d){var e=a.extend({isEqualSize:!1,defaultGroupKey:null,count:30},d);e.transitionDuration=0,e.isInitLayout=!1,e.isResizeBound=!1,this.core=new l(b,e).on("layoutComplete",a.proxy(this._onlayoutComplete,this)),this.$global=a(c),this._reset(),this.core.$element.children().length>0&&this.layout(),this._onResize=a.proxy(this._onResize,this),this.$global.on("resize",this._onResize)},_onResize:function(){function a(){b.core.element.style.width=null,b.core.needsResizeLayout()&&b.layout(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},getStatus:function(){var a,b=[];for(a in this)this.hasOwnProperty(a)&&/^_/.test(a)&&b.push(a);return{core:this.core.clone({},this.core),data:g({},this,b),html:this.core.$element.html(),cssText:this.core.element.style.cssText}},setStatus:function(b){this.core.element.style.cssText=b.cssText,this.core.$element.html(b.html),this.core.items=this.core.itemize(this.core.$element.children().toArray()),this.core.clone(this.core,b.core),a.extend(this,b.data)},isProcessing:function(){return this._isProcessing},isRecycling:function(){return this.core.options.count>0&&this._isRecycling},getGroupKeys:function(){var a=[];if(this.core._isLayoutInited)for(var b,c=0;b=this.core.items[c++];)a.push(b.groupKey);return a},layout:function(){this._isProcessing=!0,this._isAppendType=!0;for(var a,b=0;a=this.core.items[b++];)a.isAppend=!0;this.core.layout()},append:function(a,b){return this._isProcessing||0===a.length?void 0:(this._isProcessing=!0,this._isRecycling||(this._isRecycling=this.core.items.length+a.length>=this.core.options.count),this._insert(a,b,!0),a.length)},prepend:function(a,b){return this.isRecycling()&&0!==this._removedContent&&!this._isProcessing&&0!==a.length?(this._isProcessing=!0,this._fit(),a.length-this._removedContent>0&&(a=a.slice(a.length-this._removedContent)),this._insert(a,b,!1),a.length):void 0},clear:function(){this.core.$element.empty(),this.core.items.length=0,this._reset(),this.layout()},getTopElement:function(){var b,c=1/0;return a.each(this.core.getColItems(!1),function(a,d){d&&d.position.y<c&&(c=d.position.y,b=d)}),b?b.element:null},getBottomElement:function(){var b,c=-(1/0);return a.each(this.core.getColItems(!0),function(a,d){d&&d.position.y+d.size.outerHeight>c&&(c=d.position.y+d.size.outerHeight,b=d)}),b?b.element:null},_onlayoutComplete:function(a){var b=0,c=this._isAppendType;c===!1&&(this._isFitted=!1,this._fit(!0),b=a.length>this.core.items.length?0:this.core.items[a.length].position.y),this._reset(!0),this.trigger("layoutComplete",{target:a.concat(),isAppend:c,distance:b})},_insert:function(a,b,c){if(0!==a.length){this._isAppendType=c;for(var d,e=0,f=this.core.itemize(a,b);d=f[e++];)d.isAppend=c;c?this.core.items=this.core.items.concat(f):(this.core.items=f.concat(this.core.items.slice(0)),f=f.reverse()),this.isRecycling()&&this._adjustRange(c,a);var g=0===this.core.$element.children().length;this.core.$element[c?"append":"prepend"](a),g&&this.core.resetLayout();var h=this._checkImageLoaded(a),i=h.length;i>0?this._waitImageLoaded(f,h):this.core.layoutItems(f,!0)}},_adjustRange:function(b,c){var d,e,f=this.core.items.length-this.core.options.count;if(!(0>=f||(e=this._getDelimiterIndex(b,f))<0)){b?(d=this.core.items.slice(0,e),this.core.items=this.core.items.slice(e),this._isFitted=!1):(d=this.core.items.slice(e),this.core.items=this.core.items.slice(0,e));for(var g,h,i=0,j=c instanceof a?"index":"indexOf";g=d[i++];)h=g.element,e=c[j](h),-1!==e?c.splice(e,1):h.parentNode.removeChild(h);this._removedContent+=b?d.length:-d.length}},_getDelimiterIndex:function(a,b){var c,d=this.core.items.length,e=0,f=a?b-1:d-b,g=f+(a?1:-1),h=this.core.items[f].groupKey;if(null!=h&&h===this.core.items[g].groupKey)if(a){for(c=f;c>0&&h===this.core.items[c].groupKey;c--);e=0===c?-1:c+1}else{for(c=f;d>c&&h===this.core.items[c].groupKey;c++);e=c===d?-1:c}else e=a?g:f;return e},_fit:function(b){if(!this._isFitted){if(this.core.options.count<=0)return this._fit=a.noop(),void(this._isFitted=!0);for(var c,d,e=0,f=this.core.updateCols();c=this.core.items[e++];)c.position.y-=f,b&&c.css({top:c.position.y+"px"});this.core.updateCols(!0),d=this.core._getContainerSize().height,b&&this.core._setContainerMeasure(d,!1),this._isFitted=!0}},_reset:function(a){a||(this._isFitted=!0,this._isRecycling=!1,this._removedContent=0),this._isAppendType=null,this._isProcessing=!1},_checkImageLoaded:function(b){var c=[];return a(b).each(function(b,d){"IMG"===d.nodeName?!d.complete&&c.push(d):!d.nodeType||1!==d.nodeType&&9!==d.nodeType&&11!==d.nodeType||(c=c.concat(a(d).find("img").filter(function(a,b){return!b.complete}).toArray()))}),c},_waitImageLoaded:function(b,c){var d,g=this.core,i=c.length;h?(d=function(){i--,0>=i&&(f(g.element,d),g.layoutItems(b,!0))},e(this.core.element,d)):(d=function(a){i--,f(a.srcElement,d),0>=i&&g.layoutItems(b,!0)},a.each(c,function(a,b){e(b,d)}))},destroy:function(){this.core&&(this.core.destroy(),this.core=null),this.$global.off("resize",this._onResize),this.off()}})}),eg.module("infiniteGridService",[window.jQuery,eg,window,document],function(a,b,c,d){b.InfiniteGridService=b.Class.extend(b.Component,{construct:function(b,d){this._$global=a(c),this._$wrapper=a(b),this._prevScrollTop=0,this._inserting=!1,this._topElement,this._bottomElemment,this._prependTopElementInfo,this._PERSIST_KEY="__INFINITEGRIDSERVICE_PERSISTKEY__",this._EVENT_NAMESPACE=".infiniteGridService"+Math.floor(1e5*Math.random()+1),this._options=a.extend({count:120,threshold:100,usePersist:!0},d),this._isEnablePersist()&&this._$wrapper.addClass("NO_TAP_HIGHLIGHT"),this._getScrollTop(),this._infiniteGrid=new eg.InfiniteGrid(b,this._options),this._infiniteGrid.on("layoutComplete",a.proxy(function(a){this._setBoundaryElements(),a.isAppend||this._adjustPrependScroll(a),this._inserting=!1},this)),this.activate()},_getScrollTop:function(){var a;return"number"==typeof c.scrollY?a=function(){return c.scrollY}:"number"==typeof c.pageYOffset?a=function(){return c.pageYOffset}:"number"==typeof d.documentElement.scrollTop?a=function(){return d.documentElement.scrollTop}:"number"==typeof d.body.scrollTop&&(a=function(){return d.body.scrollTop}),this._getScrollTop=a,a()},_setBoundaryElements:function(){var a;(a=this._infiniteGrid.getTopElement())&&(this._topElement=a),(a=this._infiniteGrid.getBottomElement())&&(this._bottomElemment=a)},_isEnablePersist:function(){var a=eg.agent(),b=!0;return(!this._options.usePersist||"ios"===a.os.name||"android"===a.os.name&&parseFloat(a.os.version)<4.4)&&(b=!1),this._isEnablePersist=function(){return b},b},_handleScrollEnd:function(){if(!this._inserting){if(this._prevScrollTop<this._getScrollTop()){if(this._bottomElemment){var a=this._bottomElemment.getBoundingClientRect();a.top<=this._$global.height()+this._options.threshold&&this.trigger("append")}}else if(this._infiniteGrid.isRecycling()&&this._topElement){var b=this._topElement.getBoundingClientRect();b.bottom>=0-this._options.threshold&&this.trigger("prepend")}this._prevScrollTop=this._getScrollTop()}},_insertElements:function(b,c){this._inserting=!0;var d,e=0;return d="string"==typeof c?a(c):c,"append"===b?e=this._infiniteGrid.append(d):"prepend"===b&&(this._setPrependTopElementInfo(),e=this._infiniteGrid.prepend(d)),this._inserting=!1,e},_insertAjax:function(b,c,d,e){return this._inserting=!0,"object"==typeof c&&(d=c,c=void 0),a.isFunction(d)&&(e=d,d=void 0),a.ajax(c,d).always(a.proxy(function(c,d){var f;"success"===d&&(f=e?e(c):a(c)),this._insertElements(b,f)},this))},_setPrependTopElementInfo:function(){this._topElement&&(this._prependTopElementInfo={element:this._topElement,boundingClientRect:this._topElement.getBoundingClientRect()})},_adjustPrependScroll:function(){if(this._prependTopElementInfo.element){var b=a(this._prependTopElementInfo.element),d=this._$wrapper.offset().top+b.offset().top+b.outerHeight()+(0-this._prependTopElementInfo.boundingClientRect.bottom);c.scrollTo(0,d)}},activate:function(){return a(c).on("scrollend"+this._EVENT_NAMESPACE,a.proxy(this._handleScrollEnd,this)),this},deactivate:function(){return a(c).off("scrollend"+this._EVENT_NAMESPACE),this},append:function(a){return this._insertElements("append",a)},prepend:function(a){return this._insertElements("prepend",a)},appendAjax:function(a,b,c){return this._insertAjax("append",a,b,c)},prependAjax:function(a,b,c){return this._insertAjax("prepend",a,b,c)},store:function(b){if(this._isEnablePersist()){var c;b=b||this._PERSIST_KEY,c={infiniteGridStatus:this._infiniteGrid.getStatus(),scrollTop:this._getScrollTop()},this.trigger("store",c),a.persist(b,c)}},restore:function(b){var d,e=!1;return this._isEnablePersist()&&(b=b||this._PERSIST_KEY,d=a.persist(b),d&&(this._infiniteGrid.setStatus(d.infiniteGridStatus),c.scrollTo(0,d.scrollTop),this._setBoundaryElements(),e=!0),this.trigger("restore",d)),e},clear:function(){this._infiniteGrid.clear()},destroy:function(){this._infiniteGrid&&(this._infiniteGrid.destroy(),this._infiniteGrid=null),this.deactivate(),this.off()}})}),eg.module("visible",[window.jQuery,eg],function(a,b){b.Visible=b.Class.extend(b.Component,{construct:function(b){this.options={wrapper:document,targetClass:"check_visible",expandSize:0},a.extend(this.options,b),this._$wrapper=a(this.options.wrapper),this._$wrapper=this._$wrapper.length>0?this._$wrapper[0]:document,this._getAreaRect=this._$wrapper.nodeType&&1===this._$wrapper.nodeType?this._getWrapperRect:this._getWindowRect,this._targets=[],this._timer=null,this._supportElementsByClassName=function(){var a,b=document.createElement("div");return b.getElementsByClassName?(a=b.getElementsByClassName("dummy"),b.innerHTML="<span class='dummy'></span>",1===a.length):!1}(),this.refresh()},refresh:function(){return this._supportElementsByClassName?(this._targets=this._$wrapper.getElementsByClassName(this.options.targetClass),this.refresh=function(){return this}):this.refresh=function(){return this._targets=a(this._$wrapper).find("."+this.options.targetClass).each(function(){return this}),this},this.refresh()},check:function(b){return"undefined"==typeof b&&(b=-1),clearTimeout(this._timer),0>b?this._check():this._timer=setTimeout(a.proxy(function(){this._check(),this._timer=null},this),b),this},_getWrapperRect:function(){return this._$wrapper.getBoundingClientRect()},_getWindowRect:function(){return{top:0,left:0,bottom:document.documentElement.clientHeight||document.body.clientHeight,right:document.documentElement.clientWidth||document.body.clientWidth}},_reviseElements:function(b,c){return this._reviseElements=this._supportElementsByClassName?function(){return!0}:function(b,c){return a(b).hasClass(this.options.targetClass)?!0:(b.__VISIBLE__=null,this._targets.splice(c,1),!1)},this._reviseElements(b,c)},_check:function(){var b=parseInt(this.options.expandSize,10),c=[],d=[],e=this._getAreaRect();e=a.extend({},e),e.top-=b,e.left-=b,e.bottom+=b,e.right+=b;for(var f,g,h,i,j=this._targets.length-1;f=this._targets[j];j--)g=f.getBoundingClientRect(),this._reviseElements(f,j)&&(i=!!f.__VISIBLE__,f.__VISIBLE__=h=!(g.bottom<e.top||e.bottom<g.top||g.right<e.left||e.right<g.left),i!==h&&(h?c:d).unshift(f));this.trigger("change",{visible:c,invisible:d})},destroy:function(){this.off(),this._targets=[],this._$wrapper=this._timer=null}})});