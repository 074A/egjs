/*! EvergreenJs - v0.0.1 - 2015-03-31
* Copyright (c) 2015 ; Licensed LGPL v2 */
"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;f>d;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}());var raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,caf=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;if(raf&&!caf){var keyInfo={},oldraf=raf;raf=function(a){function b(){keyInfo[c]&&a()}var c=oldraf(b);return keyInfo[c]=!0,c},caf=function(a){delete keyInfo[a]}}else raf&&caf||(raf=function(a){return window.setTimeout(a,16)},caf=window.clearTimeout);window.requestAnimationFrame=raf,window.cancelAnimationFrame=caf,function(a,b){var c,d,e=function(a){var b=null;return"function"==typeof eg.defaults[a]&&(b=eg.defaults[a](d)),b};b.eg={VERSION:"0.0.1",defaults:{},_init:function(a,b){c=a||navigator.userAgent,b=b||document.documentMode||-1,d=function(){var a,d,e=/(iPhone |iPad )?OS ([\d|_]+)/.exec(c)||/(Android) ([\w.]+)/.exec(c)||/(Windows NT) ([\d|\.]+)/.exec(c)||/(Windows Phone) ([\d|\.]+)/.exec(c)||/(Windows) ([\w|\.]+)/.exec(c)||/(Mac OS X) ([\w.]+)/.exec(c)||[],f=/(Chrome|CriOS|Firefox)[\s\/]([\w.]+)/.exec(c)||/(MSIE|Trident)[\/\s]([\d.]+)/.exec(c)||[];return e.length>=3&&(/iPhone|iPad/.test(c)?e[1]="ios":/Win/.test(c)?(e[1]="window",e[2]="2000"===e[2]?"5.0":e[2]):e[1]=/Mac/.test(c)?"mac":e[1].toLowerCase(),e[2]=e[2].replace(/\_/g,".").replace(/\s/g,"")),f.length>=3?/Chrome|CriOS/.test(c)?f[1]=/SAMSUNG/.test(c)?"sbrowser":"chrome":/MSIE|Trident/.test(c)?(f[1]="ie",b>0?(d=/(Trident)[\/\s]([\d.]+)/.exec(c))?d[2]>3&&(a=parseFloat(d[2],10)+4):a=b:a=f[2]):f[1]=f[1].toLowerCase():0===f.length&&e[1]&&"android"!==e[1]&&(f=/(Safari)\/([\w.]+)/.exec(c)||[],f[1]=f[1].toLowerCase(),/safari/.test(f[1])&&(f[2]=/Apple/.test(c)?c.match(/Version\/([\d.]+)/)[1]:null)),{os:{name:e[1]||"",version:e[2]||"-1"},browser:{name:f[1]||"default",version:f[2]||e[2]||"-1",nativeVersion:a+""||"-1"}}}(),this.agent=d},translate:function(a,b,c){return c=c||!1,"translate"+(c?"3d(":"(")+a+","+b+(c?",0)":")")},isHWAccelerable:function(){var a=e("isHWAccelerable");if(null!=a)return a;var b=!1,f=d.os.version,g=d.browser.name,h=d.browser.version;if(/chrome/.test(g))b=h>="25";else if(/ie|firefox|safari/.test(g))b=!0;else if(/android/.test(d.os.name)){var i=(c.match(/\(.*\)/)||[null])[0];b=f>="4.1.0"&&!/EK-GN120|SM-G386F/.test(i)||f>="4.0.3"&&/SHW-|SHV-|GT-|SCH-|SGH-|SPH-|LG-F160|LG-F100|LG-F180|LG-F200|EK-|IM-A|LG-F240|LG-F260/.test(i)&&!/SHW-M420|SHW-M200|GT-S7562/.test(i)}return b},isTransitional:function(){var a=e("isTransitional");if(null!=a)return a;var b=!1,c=d.browser.name;if(/chrome|firefox/.test(c))b=!0;else switch(d.os.name){case"ios":b=/safari/.test(c)&&parseInt(d.os.version,10)<6;break;case"window":b=/safari/.test(c)||/ie/.test(c)&&parseInt(d.browser.nativeVersion,10)>=10;break;default:b=/chrome|firefox|safari/.test(c)}return b}},b.eg.DIRECTION_NONE=1,b.eg.DIRECTION_LEFT=2,b.eg.DIRECTION_RIGHT=4,b.eg.DIRECTION_UP=8,b.eg.DIRECTION_DOWN=16,b.eg.DIRECTION_HORIZONTAL=b.eg.DIRECTION_LEFT|b.eg.DIRECTION_RIGHT,b.eg.DIRECTION_VERTICAL=b.eg.DIRECTION_UP|b.eg.DIRECTION_DOWN,b.eg.DIRECTION_ALL=b.eg.DIRECTION_HORIZONTAL|b.eg.DIRECTION_VERTICAL,b.eg._init()}(jQuery,window),function(a){a.Class=function(a){var b=function(){"function"==typeof a.construct&&a.construct.apply(this,arguments)};return b.prototype=a,b.prototype.constructor=b,b},a.Class.extend=function(a,b){var c=function(){a.apply(this,arguments),"function"==typeof b.construct&&b.construct.apply(this,arguments)},d=function(){};d.prototype=a.prototype;var e=new d;for(var f in b)b.hasOwnProperty(f)&&(e[f]=b[f]);return e.constructor=c,c.prototype=e,c}}(eg),window.eg=window.eg||{},function(a){a.Component=a.Class({construct:function(){this.eventHandler={}},trigger:function(a,b){b=b||{};var c=this.eventHandler[a]||[],d=c.length>0;if(!d)return!0;c=c.concat(),b.eventType=a;var e=!1;b.stop=function(){e=!0};var f,g,h=[b];(g=arguments.length)>2&&(h=h.concat(Array.prototype.slice.call(arguments,2,g)));var i;for(f=0;i=c[f];f++)i.apply(this,h);return!e},hasOn:function(a){return!!this.eventHandler[a]},on:function(a,b){if("undefined"==typeof b){var c,d=a;for(c in d)this.on(c,d[c]);return this}var e=this.eventHandler[a];return"undefined"==typeof e&&(e=this.eventHandler[a]=[]),e.push(b),this},off:function(a,b){if(0===arguments.length)return this.eventHandler={},this;if("undefined"==typeof b){if("string"==typeof a)return this.eventHandler[a]=null,this;var c=a;for(var d in c)c.hasOwnProperty(d)&&this.off(d,c[d]);return this}var e=this.eventHandler[a];if(e)for(var f,g=0;f=e[g];g++)if(f===b){e=e.splice(g,1);break}return this}})}(eg),function(a,b){b.MovableCoord=b.Class.extend(b.Component,{construct:function(b){this.options={min:[0,0],max:[100,100],bounce:[10,10,10,10],margin:[0,0,0,0],circular:[!1,!1,!1,!1],easing:a.easing.easeOutQuint,deceleration:6e-4},this._reviseOptions(b),this._grabOutside=!1,this._animating=null,this._raf=null,this._hammers={},this._curHammer=null,this._pos=[this.options.min[0],this.options.min[1]],this._subOptions={},this._animationEnd=this._animationEnd.bind(this)},bind:function(c,d){var e=a(c),f=e.data(b.MovableCoord.KEY),g={direction:b.DIRECTION_ALL,scale:[1,1],maximumSpeed:1/0};return a.extend(g,d),f?this._hammers[f].get("pan").set({direction:g.direction}):(f=Math.round(Math.random()*(new Date).getTime()),this._hammers[f]=this._createHammer(e.get(0),g),e.data(b.MovableCoord.KEY,f)),this},_createHammer:function(a,b){var c=new Hammer.Manager(a,{recognizers:[[Hammer.Pan,{direction:b.direction,threshold:0}]]});return c.on("panstart",function(a){this._subOptions=b,this._curHammer=c,this._panstart(a)}.bind(this,c)).on("panmove",this._panmove.bind(this)).on("panend",this._panend.bind(this)),c},unbind:function(c){var d=a(c),e=d.data(b.MovableCoord.KEY);e&&(this._hammers[e].destroy(),delete this._hammers[e],d.data(b.MovableCoord.KEY,null))},_grab:function(){this._animating&&(this._pos=this._getCircularPos(this._pos),this._triggerChange(this._pos,!0),this._animating=null,this._raf&&cancelAnimationFrame(this._raf),this._raf=null)},_getCircularPos:function(a,b,c,d){var e;return b=b||this.options.min,c=c||this.options.max,d=d||this.options.circular,(e=d[1]&&a[0]>c[0]&&b[0]||d[3]&&a[0]<b[0]&&c[0])&&(a[0]=(a[0]-b[0])%(c[0]-b[0]+1)+e),(e=d[0]&&a[1]<b[1]&&c[1]||d[2]&&a[1]>c[1]&&b[1])&&(a[1]=(a[1]-b[1])%(c[1]-b[1]+1)+e),a},_isOutside:function(a,b,c){return a[0]<b[0]||a[1]<b[1]||a[0]>c[0]||a[1]>c[1]},_isOutToOut:function(a,b,c,d){return(a[0]<c[0]||a[0]>d[0]||a[1]<c[1]||a[1]>d[1])&&(b[0]<c[0]||b[0]>d[0]||b[1]<c[1]||b[1]>d[1])},_panstart:function(){var a=this._pos;this._grab(),this.trigger("hold",{pos:[a[0],a[1]]}),this._grabOutside=this._isOutside(a,this.options.min,this.options.max)},_panmove:function(a){a.srcEvent.preventDefault(),a.srcEvent.stopPropagation();var c,d,e,f=this._pos,g=this.options.min,h=this.options.max,i=this.options.bounce,j=this.options.margin,k=this.options.easing,l=this._subOptions.direction,m=this._subOptions.scale,n=[j[0]+i[0],j[1]+i[1],j[2]+i[2],j[3]+i[3]],o=this._curHammer.session.prevInput||{};if(o?(a.offsetX=a.deltaX-o.deltaX,a.offsetY=a.deltaY-o.deltaY):a.offsetX=a.offsetY=0,l&b.DIRECTION_HORIZONTAL&&(f[0]+=a.offsetX*m[0]),l&b.DIRECTION_VERTICAL&&(f[1]+=a.offsetY*m[1]),f=this._getCircularPos(f,g,h),this._grabOutside&&!this._isOutside(f,g,h)&&(this._grabOutside=!1),this._grabOutside)d=g[0]-n[3],e=h[0]+n[1],c=f[0],f[0]=c>e?e:d>c?d:c,d=g[1]-n[0],e=h[1]+n[2],c=f[1],f[1]=c>e?e:d>c?d:c;else{var p=k(null,1e-4,0,1,1)/1e-4;f[1]<g[1]?(c=(g[1]-f[1])/(n[0]*p),f[1]=g[1]-k(null,c>1?1:c,0,1,1)*n[0]):f[1]>h[1]&&(c=(f[1]-h[1])/(n[2]*p),f[1]=h[1]+k(null,c>1?1:c,0,1,1)*n[2]),f[0]<g[0]?(c=(g[0]-f[0])/(n[3]*p),f[0]=g[0]-k(null,c>1?1:c,0,1,1)*n[3]):f[0]>h[0]&&(c=(f[0]-h[0])/(n[1]*p),f[0]=h[0]+k(null,c>1?1:c,0,1,1)*n[1])}this._triggerChange(f,!0)},_panend:function(a){var c=this._subOptions.direction,d=this._subOptions.scale,e=Math.abs(a.velocityX),f=Math.abs(a.velocityY);!(c&b.DIRECTION_HORIZONTAL)&&(e=0),!(c&b.DIRECTION_VERTICAL)&&(f=0),this._animateBy(this._getNextOffsetPos([e*(a.deltaX<0?-1:1)*d[0],f*(a.deltaY<0?-1:1)*d[1]],this._subOptions.maximumSpeed),this._animationEnd,!1)},_animationEnd:function(){var a=this._pos,b=this.options.min,c=this.options.max;this._animateTo([Math.min(c[0],Math.max(b[0],a[0])),Math.min(c[1],Math.max(b[1],a[1]))],this.trigger.bind(this,"animationEnd"),!0)},_getNextOffsetPos:function(a,b){var c=Math.min(b||1/0,Math.sqrt(a[0]*a[0]+a[1]*a[1])),d=Math.abs(c/-this.options.deceleration);return[a[0]/2*d,a[1]/2*d]},_getDurationFromPos:function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]),c=Math.sqrt(b/this.options.deceleration*2);return 100>c?0:c},_animateBy:function(a,b,c,d){var e=this._pos;return this._animateTo([e[0]+a[0],e[1]+a[1]],b,c,d)},_getPointOfIntersection:function(a,b){var c,d,e=this.options.circular,f=this.options.bounce,g=this.options.min,h=this.options.max,i=[g[0]-f[3],g[1]-f[0]],j=[h[0]+f[1],h[1]+f[2]];return b=[b[0],b[1]],c=b[0]-a[0],d=b[1]-a[1],e[3]||(b[0]=Math.max(i[0],b[0])),e[1]||(b[0]=Math.min(j[0],b[0])),b[1]=c?a[1]+d/c*(b[0]-a[0]):b[1],e[0]||(b[1]=Math.max(i[1],b[1])),e[2]||(b[1]=Math.min(j[1],b[1])),b[0]=d?a[0]+c/d*(b[1]-a[1]):b[0],b},_isCircular:function(a,b,c,d){return a[0]&&b[1]<c[1]||a[1]&&b[0]>d[0]||a[2]&&b[1]>d[1]||a[3]&&b[0]<c[0]},_animateTo:function(a,b,c,d){var e=this._pos,f=this._getPointOfIntersection(e,a),g={depaPos:[e[0],e[1]],destPos:f,bounce:c};c||this.trigger("release",g),this._afterReleaseProcess(g,b,c,d)},_afterReleaseProcess:function(a,b,c,d){var e=this._pos,f=this.options.min,g=this.options.max,h=this.options.circular,i=a.destPos,j=this._isCircular(h,i,f,g);this._isOutToOut(e,i,f,g)&&(i=e),d=d||Math.min(1/0,this._getDurationFromPos([Math.abs(i[0]-e[0]),Math.abs(i[1]-e[1])]));var k=function(){this._animating=null,e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e=this._getCircularPos(e,f,g,h),b&&b()}.bind(this);if(!d)return k();a={duration:d,depaPos:[e[0],e[1]],destPos:i,isBounce:c,isCircular:j,done:k};var l=this.trigger("animation",a);if(j&&!l)throw new Error("You can't stop the 'animation' event when 'circular' is true.");if(a.depaPos=e,a.startTime=(new Date).getTime(),this._animating=a,l){var m=this._animating,n=this;!function o(){return n._raf=null,n._frame(m)>=1?k():void(n._raf=requestAnimationFrame(o))}()}},_frame:function(a){var b,c=new Date-a.startTime,d=Math.min(1,c/a.duration),e=this.options.easing(null,c,0,1,a.duration),f=[a.depaPos[0],a.depaPos[1]];return f[0]!==a.destPos[0]&&(b=a.destPos[0]-f[0],f[0]+=b*e),f[1]!==a.destPos[1]&&(b=a.destPos[1]-f[1],f[1]+=b*e),f=this._getCircularPos(f),this._triggerChange(f,!1),d},_reviseOptions:function(b){var c;["bounce","margin","circular"].forEach(function(a){c=b[a],null!=c&&(b[a]=Array.isArray(c)?2===c.length?[c[0],c[1],c[0],c[1]]:[c[0],c[1],c[2],c[3]]:/string|number|boolean/.test(typeof c)?[c,c,c,c]:null)}),a.extend(this.options,b)},_triggerChange:function(a,b){this.trigger("change",{pos:[a[0],a[1]],holding:b})},get:function(){return[this._pos[0],this._pos[1]]},setTo:function(a,b){this._grab();var c=[this._pos[0],this._pos[1]],d=this.options.circular,e=this.options.min,f=this.options.max;return a===c[0]&&b===c[1]?this:(a!==c[0]&&(d[3]||(a=Math.max(e[0],a)),d[1]||(a=Math.min(f[0],a))),b!==c[1]&&(d[0]||(b=Math.max(e[1],b)),d[2]||(b=Math.min(f[1],b))),this._pos=this._getCircularPos([a,b]),this._triggerChange(this._pos,!1),this)},setBy:function(a,b){return this.setTo(null!=a?this._pos[0]+a:this._pos[0],null!=b?this._pos[1]+b:this._pos[1])},destroy:function(){this.off();for(var a in this._hammers)this._hammers.hasOwnProperty(a)&&(this._hammers[a].destroy(),this._hammers[a]=null)}}),b.MovableCoord.KEY="__MOVABLECOORD__"}(jQuery,eg);